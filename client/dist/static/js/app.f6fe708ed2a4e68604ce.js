webpackJsonp([1],{EMLg:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r=a("/ocq"),n=a("xLEQ"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Room"},[t._m(0),t._v(" "),a("div",{staticClass:"VoteSection"},[a("h2",[t._v(" Vote ")]),t._v(" "),t.emptyRestaurantList?a("div",{staticClass:"emptyList"},[a("h2",[t._v(" Add restaurants to the list by using the search bar below...")])]):t._e(),t._v(" "),a("div",{staticClass:"card",attrs:{id:"vote"}},t._l(t.orderedRestaurants,function(e){return a("div",{staticClass:"VoteRestaurants"},[a("div",{staticClass:"container"},[a("img",{attrs:{id:"image",src:e.image_url,alt:"N/A"}}),t._v(" "),a("a",{attrs:{href:e.url}},[a("h3",{attrs:{id:"title"}},[t._v(t._s(e.name))])]),t._v(" "),a("p",{attrs:{id:"rating"}}),t._v(" "),a("p",{attrs:{id:"num-reviews"}},[t._v("Rating: "+t._s(e.rating)+" "),a("br"),t._v(" "+t._s(e.review_count)+" Reviews"),a("br"),t._v("Price: "+t._s(e.price))]),t._v(" "),a("h3",{attrs:{id:"vote-num"}},[t._v(t._s(e.votes.length))]),t._v(" "),a("button",{class:{unvote:1==t.userInArray(e)},on:{click:function(a){t.submitVote(e)}}},[t._v(t._s(t.userInArray(e)?"- vote":"+ vote"))])])])}))]),t._v(" "),a("div",{staticClass:"SearchSection"},[a("h2",[t._v(" Add a Restaurant ")]),t._v(" "),a("div",{staticClass:"card",attrs:{id:"search"}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.searchApi(e)}}},[a("input",{staticClass:"text-field",attrs:{id:"restoSearch",type:"text",placeholder:"Search by Name, Cuisine, Location"}})]),t._v(" "),t._l(t.searchResults,function(e){return a("div",{staticClass:"SearchResults"},[a("div",{staticClass:"container"},[a("img",{attrs:{id:"image",src:e.image_url,alt:"N/A"}}),t._v(" "),a("a",{attrs:{href:e.url}},[a("h3",{attrs:{id:"title"}},[t._v(t._s(e.name)+" ")])]),t._v(" "),a("p",{attrs:{id:"rating"}}),t._v(" "),a("p",{attrs:{id:"num-reviews"}},[t._v("Rating: "+t._s(e.rating)+" "),a("br"),t._v(" "+t._s(e.review_count)+" Reviews"),a("br"),t._v("Price: "+t._s(e.price))]),t._v(" "),a("button",{staticClass:"btn",on:{click:function(a){t.addToList(e)}}},[t._v("add")])])])})],2)]),t._v(" "),a("div",{staticClass:"footer"},[a("h3",{attrs:{id:"roomIdText"}},[t._v("Room Id: ")]),a("h3",{attrs:{id:"roomIdValue"}},[t._v(t._s(t.roomId))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Collaboreats"},[e("h1",{attrs:{id:"collab"}},[this._v(" collabor")]),this._v(" "),e("h1",{attrs:{id:"eats"}},[this._v("eats ")])])}]};var i=function(t){a("EMLg")},c=a("VU/8")(n.a,o,!1,i,"data-v-3848ec8f",null).exports,l=a("PJX0"),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Landing"},[t._m(0),t._v(" "),a("div",{staticClass:"login"},[a("div",{attrs:{id:"landingFilterBar"}},[a("ul",[a("li",{class:{active:"create"==t.filter},on:{click:function(e){t.setFilter("create")}}},[a("a",{attrs:{href:"#"}},[t._v("Create")])]),t._v(" "),a("li",{class:{active:"join"==t.filter},on:{click:function(e){t.setFilter("join")}}},[a("a",{attrs:{href:"#"}},[t._v("Join")])])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"create"==t.filter,expression:"filter == 'create'"}],staticClass:"page",attrs:{id:"createRoom"}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.createRoom(e)}}},[a("input",{staticClass:"text-field",attrs:{id:"nicknameCreate",type:"text",placeholder:"Nickname"}}),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit",id:"createRoomBtn"}},[t._v("Create")])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"join"==t.filter,expression:"filter == 'join'"}],staticClass:"page",attrs:{id:"joinRoom"}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.joinRoom(e)}}},[a("input",{staticClass:"text-field",attrs:{id:"nicknameJoin",type:"text",placeholder:"Nickname"}}),t._v(" "),a("input",{staticClass:"text-field",attrs:{id:"roomId",type:"text",placeholder:"Room ID"}}),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"submit",id:"joinRoomBtn"}},[t._v("Join")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Collaboreats"},[e("h1",{attrs:{id:"collab"}},[this._v(" collabor")]),this._v(" "),e("h1",{attrs:{id:"eats"}},[this._v("eats ")])])}]};var d=function(t){a("kf5+")},v=[{path:"/",component:a("VU/8")(l.a,u,!1,d,"data-v-2716e188",null).exports},{path:"/room/:roomId/:userId",component:c,props:!0}];s.a.use(r.a);var h=new r.a({routes:v});new s.a({router:h}).$mount("#app")},PJX0:function(t,e,a){"use strict";(function(t){e.a={name:"Landing",data:function(){return{filter:"create",response:null}},methods:{setFilter:function(t){this.filter=t},getTextFieldData:function(e){return t("#"+e).val()},joinRoom:function(e){var a=this.getTextFieldData("nicknameJoin");if(""==a)return alert("Please enter a nickname before joining a room"),!1;var s=this.getTextFieldData("roomId");if(""==s)return alert("Please enter a room ID before joining a room"),!1;t.ajax({url:"http://localhost:3000/"+s,type:"GET",async:!1,dataType:"json",success:function(t){return t.success?(window.location.replace("/#/room/"+s+"/"+a),!1):(alert("Error: Could not join room"),!1)},error:function(t){return alert("Error: "+t.responseText),!1}})},createRoom:function(){var e=this.getTextFieldData("nicknameCreate");if(""==e)return alert("Please enter a nickname before creating a room"),!1;t.ajax({url:"http://localhost:3000/",type:"POST",async:!1,dataType:"json",success:function(t){if(!t.success)return alert("Error: Could not create room"),!1;var a=t.name;return window.location.replace("/#/room/"+a+"/"+e),!1},error:function(t){return alert("Error: "+t.responseText),!1}})}}}}).call(e,a("7t+N"))},"kf5+":function(t,e){},xLEQ:function(t,e,a){"use strict";(function(t){var s=a("mvHQ"),r=a.n(s);e.a={name:"Room",props:["roomId","userId"],components:{card:a("XJwB")},computed:{orderedRestaurants:function(){return this.restaurants.sort(function(t,e){return t.votes.length<e.votes.length?1:t.votes.length>e.votes.length?-1:0})},emptyRestaurantList:function(){return!(this.restaurants.length>0||!this.pageReady)}},data:function(){return{restaurants:[],searchResults:[],pageReady:!1}},methods:{searchApi:function(){var e=this,a={term:t("#restoSearch").val().trim(),latitude:43.4761259,longitude:-80.53880979999997};t.ajax({url:"http://localhost:3000/search",type:"POST",data:r()(a),processData:!1,contentType:"application/json",success:function(t){!function(t,e){var a=e.businesses;console.log(a),t.searchResults=a}(e,t)},error:function(t){console.log(t)}})},addToList:function(e){null==this.restaurants.find(function(t){return t.id==e.id})&&(e.votes=[this.userId],this.restaurants.push(e));var a={restaurant:e.id,vote:this.userId,unvote:!1};console.log(a),t.ajax({url:"http://localhost:3000/"+this.roomId,type:"PUT",data:r()(a),processData:!1,contentType:"application/json",success:function(t){},error:function(t){console.log(t)}})},submitVote:function(e){var a=this,s={restaurant:e.id,vote:this.userId,unvote:this.userInArray(e)};console.log(s),t.ajax({url:"http://localhost:3000/"+this.roomId,type:"PUT",data:r()(s),processData:!1,contentType:"application/json",success:function(t){a.flipUserInArray(e)},error:function(t){console.log(t)}})},userInArray:function(t){return t.votes.indexOf(this.userId)>=0},flipUserInArray:function(t){var e=t.votes.indexOf(this.userId);e>=0?t.votes.splice(e,1):t.votes.push(this.userId)}},mounted:function(){var e=this;t.ajax({url:"http://localhost:3000/"+e.roomId,type:"GET",processData:!1,contentType:"application/json",success:function(a){var s=a.room.restaurants;0==s.length&&(e.pageReady=!0);var n,o={};for(n=0;n<s.length;n++)o[s[n].name]=s[n].votes;var i=[];for(n=0;n<s.length;n++)i.push(s[n].name);var c={restaurants:i};t.ajax({url:"http://localhost:3000/search/ids",type:"POST",data:r()(c),processData:!1,contentType:"application/json",success:function(t){var a=t.businesses;for(n=0;n<a.length;n++)a[n].votes=o[a[n].id];e.restaurants=a,e.pageReady=!0},error:function(t){console.log(t)}})},error:function(t){console.log(t)}})}}}).call(e,a("7t+N"))}},["NHnr"]);
//# sourceMappingURL=app.f6fe708ed2a4e68604ce.js.map